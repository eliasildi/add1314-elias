<chapter>
	<title>A3 SSH</title>
	<para>Esta práctica constará de los siguientes apartados:
		<itemizedlist>
                <listitem>0. Introducción.</listitem>
                <listitem>1. Preparativos.</listitem>
                <listitem>2. Instalación básica.</listitem>
                <listitem>3. Personalización del prompt Bash</listitem>
                <listitem>4. Autenticación mediante claves públicas</listitem>
                <listitem>5. Uso de SSH como túnel para X</listitem>
                <listitem>6. Aplicaciones Windows nativas</listitem>
                <listitem>7. Restricciones de uso</listitem>
                <listitem>8. Resumen</listitem>
        </itemizedlist>
	</para>
	
<sect1>

		<title>0. Introducción.</title>
		<para>Para realizar esta práctica vamos a realizar dos esquemas, el primero con tendra un servidor SSH instalado
		en XUbuntu con dos clientes (Windows 7 y OpenSuse) y el segundo esquema tendrá un servidor SSH bajo Windows Server
		2008 con dos clientes también (Windows 7 y OpenSuse):
		<itemizedlist>
			<listitem>S1. Servidor SSH XUbuntu.</listitem>
			<listitem>C1. OpenSuse.</listitem>
			<listitem>C2. Windows 7.</listitem>
		</itemizedlist>
		<itemizedlist>
			<listitem>S1. Servidor SSH wIndows Server 2008.</listitem>
			<listitem>C1. OpenSuse.</listitem>
			<listitem>C2. Windows 7.</listitem>
		</itemizedlist>
		</para>
</sect1>

<sect2>
		<title>1. Preparativos.</title>
		
		<section>
			<title>Configuracion del Servidor SSH XUbuntu.</title>
			
			
			<section>
				<title>IP, HOST, Nombres de equipo, usuarios.</title>
				<para>
				<figure id="001">
		<title>Usuarios.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/01.s.usuarios.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Usuarios.</phrase>
				</textobject>
				<caption>
					<para>Usuarios.</para>
				</caption>
			</mediaobject>
</figure>


<figure id="002">
		<title>IPs Servidor.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/01sIPstatic.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Ips Servidor.</phrase>
				</textobject>
				<caption>
					<para>Ips Servidor.</para>
				</caption>
			</mediaobject>
</figure>


<figure id="003">
		<title>Nombre equipo.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/01s.etc-hosts.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Nombre equipo.</phrase>
				</textobject>
				<caption>
					<para>Nombre equipo.</para>
				</caption>
			</mediaobject>
</figure>
				
				
				</para>
			</section>
		</section>
		
		<section>
			<title>Instalación  y configuracion del Servidor SSH Windows.</title>
			<para>bla bla bla</para>
			<section>
				<title>Instalación.</title>
				<para>bla bla bla</para>
			</section>
			
			<section>
				<title>IP, HOST, Nombres de equipo, usuarios.</title>
				<para>bla bla bla</para>
			</section>
		</section>
		
		<section>
			<title>Clientes.</title>
			<para>Los clientes son iguales en ambos esquemas, tan solo cambian las Ips</para>
			<section>
				<title>Opensuse.</title>
				<para>bla bla bla</para>
				
				<section>
					<title>Instalación.</title>
					<para>bla bla bla</para>
				</section>
			
				<section>
					<title>IP, HOST, Nombres de equipo, usuarios.</title>
					<para>bla bla bla</para>
				</section>
				
				
			</section>
			
			<section>
				<title>Windows 7</title>
				<para>Tendremos que instalar un software para poder utilizar ssh, y modificaremos el archivo C:\Windows\System32\drivers\etc\hosts</para>
				
				<section>
					<title>Instalación.</title>
					<para>Instalaremos el PuTTY
<figure id="004">
		<title>Putty instalado</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/c1putty.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Putty instalado.</phrase>
				</textobject>
				<caption>
					<para>Putty instalado.</para>
				</caption>
			</mediaobject>
</figure>
					
					</para>
				</section>
			
				<section>
					<title>IP, HOST.</title>
					<para>
					
<figure id="005">
		<title>IP Win7</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/c1IP.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>IP Win7.</phrase>
				</textobject>
				<caption>
					<para>IP Win7.</para>
				</caption>
			</mediaobject>
</figure>

<figure id="006">
		<title>Archivo Hosts</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/c1hosts.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Archivo Hosts.</phrase>
				</textobject>
				<caption>
					<para>Archivo Hosts.</para>
				</caption>
			</mediaobject>
</figure>
					
					</para>
				</section>
				
				
				
			</section>
		</section>
</sect2>


<sect3>
		<title>2. Instalación Básica.</title>
		
		<para>Instalamos el openssh-server:
<figure id="007">
		<title>Instalar SSH.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/01sopenssh-server.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Instalar SSH.</phrase>
				</textobject>
				<caption>
					<para>Instalar SSH.</para>
				</caption>
			</mediaobject>
</figure>
		</para>
			<title>Comprobaciones y generación de claves.</title>
			<para>Iniciamos el servicio ssh:</para>
<figure id="008">
		<title>Iniciar ssh.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/2sverificar.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Iniciar ssh.</phrase>
				</textobject>
				<caption>
					<para>Iniciar ssh.</para>
				</caption>
			</mediaobject>
</figure>
			<para>Nos conectamos desde Windows con PuTTy:</para>
<figure id="009">
		<title>Primera coexion ssh.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/CAPTURA-JOEL.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Primera coexion ssh.</phrase>
				</textobject>
				<caption>
					<para>Primera coexion ssh.</para>
				</caption>
			</mediaobject>
</figure>
			
<figure id="010">
		<title>Conectado con Putty.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/2c1remoteuser1.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Conectado con Putty.</phrase>
				</textobject>
				<caption>
					<para>Conectado con Putty.</para>
				</caption>
			</mediaobject>
</figure>
		<para>En Windows no encontramos el fichero known_hosts. Crearemos nuevas claves en el servidor con el comando ssh-keygen:</para>

<figure id="011">
		<title>Generar Nuevas Claves.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/2sssh-keygen.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Generar Nuevas Claves.</phrase>
				</textobject>
				<caption>
					<para>Generar Nuevas Claves.</para>
				</caption>
			</mediaobject>
</figure>
			<para>Reiniciamos el servicio:</para>
<figure id="012">
		<title>Reiniciar SSH.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/2sreiniciarservicio.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Reiniciar SSH.</phrase>
				</textobject>
				<caption>
					<para>Reiniciar SSH.</para>
				</caption>
			</mediaobject>
</figure>
	

			<para>Volvemos a conectarnos desde los clientes, usando el usuario remoteuser2 y remoteuser1. ¿Qué sucede?:</para>
<figure id="012">
		<title>Reconectar con SSH.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/CAPTURAJOELRECONECTAR.png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Reconectar con SSH.</phrase>
				</textobject>
				<caption>
					<para>Reconectar con SSH.</para>
				</caption>
			</mediaobject>
</figure>	
		
</sect3>


<sect4>
		<title>3. Personalización del prompt Bash. ELIAS ESTA EN PROCESO</title>
		<para>En cada usuario hay que modificar el fichero .bashrc y agregar unas lineas al final:</para>
<figure id="013">
		<title>Fichero .bashrc.</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="img/t1a3/en proceso .png" format="PNG" align="center" scale="70" />
				</imageobject>
				<textobject>
					<phrase>Fichero .bashrc.</phrase>
				</textobject>
				<caption>
					<para>Fichero .bashrc.</para>
				</caption>
			</mediaobject>
</figure>	



</sect4>


<sect5>
		<title>4. Autenticación mediante claves públicas</title>
		<para>JOEL LA HIZO</para>
		
</sect5>

<sect6>
		<title>5. Uso de SSH como túnel para X</title>
		<para>FOTOCOPIAS</para>
		
</sect6>

<sect7>
		<title>6. Aplicaciones Windows nativas</title>
		<para>bla bla bla</para>
		
</sect7>

<sect8>
		<title>7. Restricciones de uso</title>
		<para>bla bla bla</para>
		
</sect8>


</chapter>
